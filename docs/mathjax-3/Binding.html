
<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Funcon specifications - CBS-LaTeX</title>
  <link rel="shortcut icon" href="/cbs-latex/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/cbs-latex/assets/css/just-the-docs-default.css">
    <script type="text/javascript" src="/cbs-latex/assets/js/vendor/lunr.min.js"></script>
  <script type="text/javascript" src="/cbs-latex/assets/js/just-the-docs.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Funcon specifications | CBS-LaTeX</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Funcon specifications" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This site illustrates how CBS specifications of languages and funcons could be formatted for the web using LaTeX, Markdown, KaTeX, and MathJax. One of the aims is for CBS on web pages look like the CBS in published papers, using mathematical symbols instead of plain text." />
<meta property="og:description" content="This site illustrates how CBS specifications of languages and funcons could be formatted for the web using LaTeX, Markdown, KaTeX, and MathJax. One of the aims is for CBS on web pages look like the CBS in published papers, using mathematical symbols instead of plain text." />
<link rel="canonical" href="https://plancomps.github.io/cbs-latex/docs/mathjax-3/Binding.html" />
<meta property="og:url" content="https://plancomps.github.io/cbs-latex/docs/mathjax-3/Binding.html" />
<meta property="og:site_name" content="CBS-LaTeX" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Funcon specifications" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"This site illustrates how CBS specifications of languages and funcons could be formatted for the web using LaTeX, Markdown, KaTeX, and MathJax. One of the aims is for CBS on web pages look like the CBS in published papers, using mathematical symbols instead of plain text.","headline":"Funcon specifications","url":"https://plancomps.github.io/cbs-latex/docs/mathjax-3/Binding.html"}</script>
<!-- End Jekyll SEO tag -->
    <script>
  MathJax = { 
    tex: { 
      maxBuffer: 10 * 1024,
      tags: 'ams',
      packages: {'[+]': ['textmacros']},
      macros: {
        relax: ''
        }
    },
    loader: {
      load: ['[tex]/textmacros', 'ui/lazy']
    },
    chtml: { 
      mtextFont: 'sans-serif', 
      displayAlign: 'left', 
      displayIndent: '2em'
    },
    svg: { 
      mtextFont: 'sans-serif', 
      displayAlign: 'left', 
      displayIndent: '2em',
      fontCache: 'global'
    }
  };
</script>
<!-- Automatically display code inside script tags with type=math/tex using MathJax -->
<script type="text/javascript" defer
  src="/just-the-docs-tests/assets/js/mathjax-script-type.js">
</script>
<!-- Copied from https://docs.mathjax.org/en/latest/web/components/combined.html -->
<script type="text/javascript" id="MathJax-script" defer
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<!-- https://www.primative.net/blog/how-to-get-rid-of-the-flash-of-unstyled-content/ -->
<style>
  .no-js {
    visibility: visible;
  }
</style>
<link rel="shortcut icon" type="image/x-icon"   href="/cbs-latex/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180"    href="/cbs-latex/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/cbs-latex/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/cbs-latex/assets/icons/favicon-16x16.png">
<link rel="mask-icon" href="/cbs-latex/assets/icons/safari-pinned-tab.svg">
<link rel="manifest"  href="/cbs-latex/assets/icons/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>
  <script type="text/javascript" src="/cbs-latex/assets/js/toggle_init.js"></script>
  <div class="side-bar">
    <div class="site-header">
      <a href="/cbs-latex/" class="site-title lh-tight">
  CBS-LaTeX
</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
  <button id="theme-toggle" onclick="modeSwitcher()" 
    type="button" name="button" class="btn theme-toggle" ></button>
  <script>
    function modeSwitcher() {
      let currentMode = document.documentElement.getAttribute('data-theme');
      if (currentMode === "dark") {
        document.documentElement.setAttribute('data-theme', 'light');
        window.localStorage.setItem('theme', 'light');
        document.getElementById("theme-toggle").innerHTML = "&rarr; Dark Mode";
      } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        window.localStorage.setItem('theme', 'dark');
        document.getElementById("theme-toggle").innerHTML = "&rarr; Light Mode";
      }
    }
  </script>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      <ul class="nav-list"><li class="nav-list-item"><a href="/cbs-latex/docs/intro.html" class="nav-list-link">Introduction</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/local.html" class="nav-list-link">Local browsing</a></li>
<li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/cbs-latex/docs/macros.html" class="nav-list-link">Macros</a><ul class="nav-list"><li class="nav-list-item"><a href="/cbs-latex/docs/katex/cbs-katex.html" class="nav-list-link">CBS-KaTeX</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/latex/cbs-latex.html" class="nav-list-link">CBS-LaTeX</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/mathjax-3/cbs-mathjax.html" class="nav-list-link">CBS-MathJax</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/mathjax-2.7/cbs-mathjax-2.7.html" class="nav-list-link">CBS-MathJax-2.7</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/mathjax-2.7/cbs-mathjax-lncs.html" class="nav-list-link">CBS-MathJax-LNCS</a></li>
</ul>
</li>
<li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/cbs-latex/docs/samples.html" class="nav-list-link">Samples</a><ul class="nav-list"><li class="nav-list-item"><a href="/cbs-latex/docs/katex/Binding.html" class="nav-list-link">Funcon specifications</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/katex/SIMPLE-3-Statements.html" class="nav-list-link">Language specifications</a></li>
<li class="nav-list-item"><a href="/cbs-latex/docs/katex/TEST-Start.html" class="nav-list-link">ASCII Tests</a></li>
</ul>
</li>
</ul>
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search CBS-LaTeX" aria-label="Search CBS-LaTeX" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
              <li class="aux-nav-list-item">
                <a href="https://github.com/plancomps/cbs-latex" class="site-button"
                >
                  CBS-LaTeX on GitHub
                </a>
              </li>
          </ul>
        </nav>
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      <div id="main-content" class="main-content" role="main">
          <div style="display: none">
  \(
  % cbs-mathjax.sty
% For use with mathjax-3.html.
% For formatting pages using CBS with MathJax-3. 
% When using Jekyll, include this file in a page by adding to the front matter:
%   layout: cbs-mathjax
% or:
%   layout: cbs-mathjax-local
% The macros support formatting all of CBS. The MathJax-3 rendering is
% compatible with the LaTeX rendering of articles that use cbs-latex.sty.
% The colors are specified using CSS, so that they can be changed according
% to the page background color.
% The configuration tex block should include:
%        maxBuffer : 10 * 1024
% The output block should include:
%        mtextFont: 'sans-serif'
% See the docs at: 
% ???
\newcommand{\llbracket}{[\![}
\newcommand{\rrbracket}{]\!]}
\newcommand{\nobreak}{}
% \SHADE{MATH} can be defined to produce a shaded background to highlight
% inline MATH in running text:
\newcommand{\SHADE}[1]{#1}
% \STYLE{STYLE-NAME}{TEXT-OR-MATH} lets CSS determine the color of TEXT-OR-MATH, 
% so that it can change when a web page changes between light and dark modes.
% STYLE-NAME should be either Key, PartVariable, Name, SyntaxName, SemanticsName,
% Language, or SectNumber.
% TO DO: Improve the style names!
\newcommand{\STYLE}[2]{\class{cbs-#1}{#2}}
% \KEY{text}, \STRING{text}, \ATOM{text}, \LEX{text} can be used in text or math.
% When the MathJax configuration includes mtextFont: 'sans-serif', \KEY{text}
% renders as slanted sans-serif, but \VAR{text} still renders in a serif font.
\newcommand{\KEY}[1]{\textit{\STYLE{Key}{#1}}}
\newcommand{\STRING}[1]{\text{``$\mathtt{#1}$''}}
\newcommand{\ATOM}[1]{\text{`$\mathtt{#1}$'}}
\newcommand{\LEX}[1]{\text{\STYLE{Key}{`}$\mathtt{#1}$\STYLE{Key}{'}}}
% The following commands produce ASCII characters that are treated specially by LaTeX:
\newcommand{\HASH}{\unicode{x0023}}        % {\char`\#}
\newcommand{\DOLLAR}{\unicode{x0024}}      % {\char`\$}
\newcommand{\PERCENT}{\unicode{x0025}}     % {\char`\%}
\newcommand{\AMPERSAND}{\unicode{x0026}}   % {\char`\&}
\newcommand{\APOSTROPHE}{\unicode{x0027}}  % {\char`\'}
\newcommand{\BACKSLASH}{\unicode{x005c}}   % {\char`\\}
\newcommand{\CARET}{\unicode{x005e}}       % {\char`\^}
\newcommand{\UNDERSCORE}{\unicode{x005f}}  % {\char`\_}
\newcommand{\GRAVE}{\unicode{x0060}}       % {\char`\`}
\newcommand{\LEFTBRACE}{\unicode{x007b}}   % {\char`\{}
\newcommand{\RIGHTBRACE}{\unicode{x007d}}  % {\char`\}}
\newcommand{\TILDE}{\unicode{x007e}}       % {\textasciitilde}
% \FUN{name} highlights the name.
% \FUNDEC{name} declares Name.name as the target of links to name.
% \FUNREF{name} links name to the target Name.name in the current file.
% \FUNHYP{url}{file}{name} links name to Name.name at url/file/file.pdf.
% Similarly for \VAR{partvariable}, \SYN{syntaxname}, \SEM{semanticsName},
% and \SECT{sectionnumber}
% The kerns in \SUB and \VAR avoid overlaps with primes:
\newcommand{\SUB}[1]{_{\kern-2mu\STYLE{PartVariable}{#1}}}
% PLAIN
\newcommand{\VAR}[1]{\STYLE{PartVariable}{\it#1\kern2mu}}
% \it#1 currently formats #1 in the text italic font, independently of mtextFont.
\newcommand{\FUN}[1]{\STYLE{Name}{\textsf{#1}}}
\newcommand{\SYN}[1]{\STYLE{SyntaxName}{\textsf{#1}}}
\newcommand{\SEM}[1]{\STYLE{SemanticsName}{\textsf{#1}}}
\newcommand{\SECT}[1]{\STYLE{SectionNumber}{\textsf{#1}}}
\newcommand{\LANG}[1]{\STYLE{Language}{#1}}
% DEC
\newcommand{\DEC}[3]{\smash{\raise{2.4ex}{\cssId{#1:#2}{}}}#3}
\newcommand{\VARDEC}[1]{\DEC{PartVariable}{#1}{\VAR{#1}}}
\newcommand{\FUNDEC}[1]{\DEC{Name}{#1}{\FUN{#1}}}
\newcommand{\SYNDEC}[1]{\DEC{SyntaxName}{#1}{\SYN{#1}}}
\newcommand{\SEMDEC}[1]{\DEC{SemanticsName}{#1}{\SEM{#1}}}
\newcommand{\SECTDEC}[1]{\DEC{SectionNumber}{#1}{\textsf{#1}}}
% \newcommand{\LANGDEC}[1]{\DEC{Language}{#1}{\LANG{#1}}}
% REF
\newcommand{\REF}[3]{\href{###1%3A#2}{#3}}
\newcommand{\VARREF}[1]{\REF{PartVariable}{#1}{\VAR{#1}}}
\newcommand{\FUNREF}[1]{\REF{Name}{#1}{\FUN{#1}}}
\newcommand{\SYNREF}[1]{\REF{SyntaxName}{#1}{\SYN{#1}}}
\newcommand{\SEMREF}[1]{\REF{SemanticsName}{#1}{\SEM{#1}}}
\newcommand{\SECTREF}[1]{\REF{SectionNumber}{#1}{\SECT{#1}}}
% \newcommand{\LANGREF}[1]{\REF{Language}{#1}{\LANG{#1}}}
% HYP
\newcommand{\HYP}[5]{\href{#1/#2/index.html###3%3A#4}{#5}}
\newcommand{\VARHYP}[3]{\HYP{#1}{#2}{PartVariable}{#3}{\VAR{#3}}}
\newcommand{\FUNHYP}[3]{\HYP{#1}{#2}{Name}{#3}{\FUN{#3}}}
\newcommand{\SYNHYP}[3]{\HYP{#1}{#2}{SyntaxName}{#3}{\SYN{#3}}}
\newcommand{\SEMHYP}[3]{\HYP{#1}{#2}{SemanticsName}{#3}{\SEM{#3}}}
\newcommand{\SECTHYP}[3]{\HYP{#1}{#2}{SectionNumber}{#3}{\SECT{#3}}}
% \newcommand{\LANGHYP}[3]{\HYP{#1}{#2}{Language}{#3}{\LANG{#3}}}
% CBS-beta/math hyperlinks
\newcommand{\CBSBETAMATH}{https://plancomps.github.io/CBS-beta/math}
\newcommand{\VARCBS}[3]{\VARHYP{\CBSBETAMATH/#1}{#2}{#3}}
\newcommand{\FUNCBS}[3]{\FUNHYP{\CBSBETAMATH/#1}{#2}{#3}}
\newcommand{\SYNCBS}[3]{\SYNHYP{\CBSBETAMATH/#1}{#2}{#3}}
\newcommand{\SEMCBS}[3]{\SEMHYP{\CBSBETAMATH/#1}{#2}{#3}}
\newcommand{\SECTCBS}[3]{\SECTHYP{\CBSBETAMATH/#1}{#2}{#3}}
% \newcommand{\LANGCBS}[3]{\LANGHYP{\CBSBETAMATH/#1}{#2}{#3}}
% \LEFTPHRASE MATH \RIGHTPHRASE produces [[ MATH ]] with proper brackets:
\newcommand{\LEFTPHRASE}{\llbracket}
\newcommand{\RIGHTPHRASE}{\rrbracket}
% \LEFTGROUP MATH \RIGHTGROUP produces ( MATH ) where the parentheses are
% highlighted the same as keywords:
\newcommand{\LEFTGROUP}{\STYLE{Key}{(}}
\newcommand{\RIGHTGROUP}{\STYLE{Key}{)}}
% MATH\PLUS produces a superscript +
% MATH\STAR produces a superscript *
% MATH\QUERY produces a superscript ?
\newcommand{\PLUS}{ {}^{\texttt{+}}}
\newcommand{\STAR}{ {}^{\texttt{*}}}
\newcommand{\QUERY}{ {}^{\texttt{?}}}
% \RULE{premise}{conclusion} produces
%     premise
%   ----------
%   conclusion
\newcommand{\RULE}[2]{\frac{\displaystyle#1}{\displaystyle#2}}
% See https://tex.stackexchange.com/questions/337328/superscripts-appear-in-various-weird-places-in-fractions
% \RULE
%   {\begin{aligned} & premise \\ & ... \end{aligned}}
%   {\begin{aligned} & conclusion ... \\ & ... \end{aligned}}
% produces an inference rule with left-aligned premises and split conclusion
%      premise
%      ...
%   --------------
%   conclusion ...
%   ...
% \TO TYPE produces => TYPE
\newcommand{\TO}{\mathop{\Rightarrow}}
% TERM \TRANS TERM produces TERM ---> TERM
\newcommand{\TRANS}{\longrightarrow}
% TERM \xrightarrow{LABEL} TERM puts the label above the long arrow
  \)
</div>
<div style="display: none">
  \(
  \renewcommand{\HYP}[5]{#5}
  \)
</div>
<blockquote>
  <p>This page is using MathJax-3. <a href="../mathjax-2.7/Binding">See the same page using MathJax-2.7</a>.</p>
</blockquote>
<blockquote class="note">
  <p>Links to non-local declarations are disabled on this sample page.</p>
</blockquote>
<p><!--  --></p>
<details open="">
  <summary class="text-delta">
    OUTLINE
  </summary>
<ul id="markdown-toc">
  <li><a href="#binding" id="markdown-toc-binding">Binding</a>    <ul>
      <li><a href="#environments" id="markdown-toc-environments">Environments</a></li>
      <li><a href="#current-bindings" id="markdown-toc-current-bindings">Current bindings</a></li>
      <li><a href="#scope" id="markdown-toc-scope">Scope</a></li>
      <li><a href="#recurse" id="markdown-toc-recurse">Recurse</a></li>
    </ul>
  </li>
</ul>
</details><hr />
      <h3 id="binding">
          <a href="#binding" class="anchor-heading" aria-labelledby="binding"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Binding
      </h3>
\[\begin{align*}
  [ \
  \KEY{Type} \quad &amp; \FUNREF{environments} \\
  \KEY{Alias} \quad &amp; \FUNREF{envs} \\
  \KEY{Datatype} \quad &amp; \FUNREF{identifiers} \\
  \KEY{Alias} \quad &amp; \FUNREF{ids} \\
  \KEY{Funcon} \quad &amp; \FUNREF{identifier-tagged} \\
  \KEY{Alias} \quad &amp; \FUNREF{id-tagged} \\
  \KEY{Funcon} \quad &amp; \FUNREF{fresh-identifier} \\
  \KEY{Entity} \quad &amp; \FUNREF{environment} \\
  \KEY{Alias} \quad &amp; \FUNREF{env} \\
  \KEY{Funcon} \quad &amp; \FUNREF{initialise-binding} \\
  \KEY{Funcon} \quad &amp; \FUNREF{bind-value} \\
  \KEY{Alias} \quad &amp; \FUNREF{bind} \\
  \KEY{Funcon} \quad &amp; \FUNREF{unbind} \\
  \KEY{Funcon} \quad &amp; \FUNREF{bound-directly} \\
  \KEY{Funcon} \quad &amp; \FUNREF{bound-value} \\
  \KEY{Alias} \quad &amp; \FUNREF{bound} \\
  \KEY{Funcon} \quad &amp; \FUNREF{closed} \\
  \KEY{Funcon} \quad &amp; \FUNREF{scope} \\
  \KEY{Funcon} \quad &amp; \FUNREF{accumulate} \\
  \KEY{Funcon} \quad &amp; \FUNREF{collateral} \\
  \KEY{Funcon} \quad &amp; \FUNREF{bind-recursively} \\
  \KEY{Funcon} \quad &amp; \FUNREF{recursive}
  \ ]
\end{align*}\]
\[\begin{align*}
  \KEY{Meta-variables} \quad
  &amp; \VAR{T} &lt;: \FUNHYP{../../../Values}{Value-Types}{values}
\end{align*}\]
      <h4 id="environments">
          <a href="#environments" class="anchor-heading" aria-labelledby="environments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Environments
      </h4>
\[\begin{align*}
  \KEY{Type} \quad 
  &amp; \FUNDEC{environments}  
    \leadsto \FUNHYP{../../../Values/Composite}{Maps}{maps}
               (  \FUNREF{identifiers}, 
                      \FUNHYP{../../../Values}{Value-Types}{values}\QUERY )
\\
  \KEY{Alias} \quad
  &amp; \FUNDEC{envs} = \FUNREF{environments}
\end{align*}\]
<p>An environment represents bindings of identifiers to values.
  Mapping an identifier to \((   \  )\) represents that its binding is hidden.</p>
<p>Circularity in environments (due to recursive bindings) is represented using
  bindings to cut-points called \(\FUNHYP{../.}{Linking}{links}\). Funcons are provided for making
  declarations recursive and for referring to bound values without explicit
  mention of links, so their existence can generally be ignored.</p>
\[\begin{align*}
  \KEY{Datatype} \quad 
  \FUNDEC{identifiers} 
  \ ::= \ &amp;
  \{ \_ : \FUNHYP{../../../Values/Composite}{Strings}{strings} \} \mid \FUNDEC{identifier-tagged}(
                   \_ : \FUNREF{identifiers}, \_ : \FUNHYP{../../../Values}{Value-Types}{values})
\end{align*}\]
\[\begin{align*}
  \KEY{Alias} \quad
  &amp; \FUNDEC{ids} = \FUNREF{identifiers}
\\
  \KEY{Alias} \quad
  &amp; \FUNDEC{id-tagged} = \FUNREF{identifier-tagged}
\end{align*}\]
<p>An identifier is either a string of characters, or an identifier tagged with
  some value (e.g., with the identifier of a namespace).</p>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{fresh-identifier} 
    :  \TO \FUNREF{identifiers} 
\end{align*}\]
<p>\(\FUNREF{fresh-identifier}\) computes an identifier distinct from all previously
  computed identifiers.</p>
\[\begin{align*}
  \KEY{Rule} \quad
    &amp; \FUNREF{fresh-identifier} \leadsto 
        \FUNREF{identifier-tagged}
          (  \STRING{generated}, 
                 \FUNHYP{../.}{Generating}{fresh-atom} )
\end{align*}\]
      <h4 id="current-bindings">
          <a href="#current-bindings" class="anchor-heading" aria-labelledby="current-bindings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current bindings
      </h4>
\[\begin{align*}
  \KEY{Entity} \quad
  &amp; \FUNDEC{environment}(\_ : \FUNREF{environments}) \vdash \_ \TRANS  \_
\end{align*}\]
\[\begin{align*}
  \KEY{Alias} \quad
  &amp; \FUNDEC{env} = \FUNREF{environment}
\end{align*}\]
<p>The environment entity allows a computation to refer to the current bindings
  of identifiers to values.</p>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{initialise-binding}(
                     \VAR{X} :  \TO \VAR{T}) 
    :  \TO \VAR{T} \\&amp;\quad
    \leadsto \FUNHYP{../.}{Linking}{initialise-linking}
               (  \FUNHYP{../.}{Generating}{initialise-generating}
                       (  \FUNREF{closed}
                               (  \VAR{X} ) ) )
\end{align*}\]
<p>\(\FUNREF{initialise-binding}
    (  \VAR{X} )\) ensures that \(\VAR{X}\) does not depend on non-local bindings.
  It also ensures that the linking entity (used to represent potentially cyclic
  bindings) and the generating entity (for creating fresh identifiers) are 
  initialised.</p>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{bind-value}(
                     \VAR{I} : \FUNREF{identifiers}, \VAR{V} : \FUNHYP{../../../Values}{Value-Types}{values}) 
    :  \TO \FUNREF{environments} \\&amp;\quad
    \leadsto \{ \VAR{I} \mapsto 
                  \VAR{V} \}
\\
  \KEY{Alias} \quad
  &amp; \FUNDEC{bind} = \FUNREF{bind-value}
\end{align*}\]
<p>\(\FUNREF{bind-value}
    (  \VAR{I}, 
           \VAR{X} )\) computes the environment that binds only \(\VAR{I}\) to the value
  computed by \(\VAR{X}\).</p>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{unbind}(
                     \VAR{I} : \FUNREF{identifiers}) 
    :  \TO \FUNREF{environments} \\&amp;\quad
    \leadsto \{ \VAR{I} \mapsto 
                  (   \  ) \}
\end{align*}\]
<p>\(\FUNREF{unbind}
    (  \VAR{I} )\) computes the environment that hides the binding of \(\VAR{I}\).</p>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{bound-directly}(
                     \_ : \FUNREF{identifiers}) 
    :  \TO \FUNHYP{../../../Values}{Value-Types}{values} 
\end{align*}\]
<p>\(\FUNREF{bound-directly}
    (  \VAR{I} )\) returns the value to which \(\VAR{I}\) is currently bound, if any,
  and otherwise fails.</p>
<p>\(\FUNREF{bound-directly}
    (  \VAR{I} )\) does <em>not</em> follow links. It is used only in connection with
  recursively-bound values when references are not encapsulated in abstractions.</p>
\[\begin{align*}
  \KEY{Rule} \quad
    &amp; \RULE{
      \FUNHYP{../../../Values/Composite}{Maps}{lookup}
        (  \VAR{\rho}, 
               \VAR{I} ) \leadsto 
        (  \VAR{V} : \FUNHYP{../../../Values}{Value-Types}{values} )
      }{
      \FUNREF{environment} (  \VAR{\rho} ) \vdash \FUNREF{bound-directly}
                    (  \VAR{I} : \FUNREF{identifiers} ) \TRANS 
        \VAR{V}
      }
\\
  \KEY{Rule} \quad
    &amp; \RULE{
      \FUNHYP{../../../Values/Composite}{Maps}{lookup}
        (  \VAR{\rho}, 
               \VAR{I} ) \leadsto 
        (   \  )
      }{
      \FUNREF{environment} (  \VAR{\rho} ) \vdash \FUNREF{bound-directly}
                    (  \VAR{I} : \FUNREF{identifiers} ) \TRANS 
        \FUNHYP{../../Abnormal}{Failing}{fail}
      }
\end{align*}\]
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{bound-value}(
                     \VAR{I} : \FUNREF{identifiers}) 
    :  \TO \FUNHYP{../../../Values}{Value-Types}{values} \\&amp;\quad
    \leadsto \FUNHYP{../.}{Linking}{follow-if-link}
               (  \FUNREF{bound-directly}
                       (  \VAR{I} ) )
\\
  \KEY{Alias} \quad
  &amp; \FUNDEC{bound} = \FUNREF{bound-value}
\end{align*}\]
<p>\(\FUNREF{bound-value}
    (  \VAR{I} )\) inspects the value to which \(\VAR{I}\) is currently bound, if any,
   and otherwise fails. If the value is a link, \(\FUNREF{bound-value}
    (  \VAR{I} )\) returns the
   value obtained by following the link, if any, and otherwise fails. If the 
   inspected value is not a link, \(\FUNREF{bound-value}
    (  \VAR{I} )\) returns it.</p>
<p>\(\FUNREF{bound-value}
    (  \VAR{I} )\) is used for references to non-recursive bindings and to
   recursively-bound values when references are encapsulated in abstractions.</p>
      <h4 id="scope">
          <a href="#scope" class="anchor-heading" aria-labelledby="scope"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Scope
      </h4>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{closed}(
                     \VAR{X} :  \TO \VAR{T}) 
    :  \TO \VAR{T} 
\end{align*}\]
<p>\(\FUNREF{closed}
    (  \VAR{X} )\) ensures that \(\VAR{X}\) does not depend on non-local bindings.</p>
\[\begin{align*}
  \KEY{Rule} \quad
    &amp; \RULE{
      \FUNREF{environment} (  \FUNHYP{../../../Values/Composite}{Maps}{map}
                      (   \  ) ) \vdash \VAR{X} \TRANS 
        \VAR{X}'
      }{
      \FUNREF{environment} (  \_ ) \vdash \FUNREF{closed}
                    (  \VAR{X} ) \TRANS 
        \FUNREF{closed}
          (  \VAR{X}' )
      }
\\
  \KEY{Rule} \quad
    &amp; \FUNREF{closed}
        (  \VAR{V} : \VAR{T} ) \leadsto 
        \VAR{V}
\end{align*}\]
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{scope}(
                     \_ : \FUNREF{environments}, \_ :  \TO \VAR{T}) 
    :  \TO \VAR{T} 
\end{align*}\]
<p>\(\FUNREF{scope}
    (  \VAR{D}, 
           \VAR{X} )\) executes \(\VAR{D}\) with the current bindings, to compute an environment
  \(\VAR{\rho}\) representing local bindings. It then executes \(\VAR{X}\) to compute the result,
  with the current bindings extended by \(\VAR{\rho}\), which may shadow or hide previous
  bindings.</p>
<p>\(\FUNREF{closed}
    (  \FUNREF{scope}
            (  \VAR{\rho}, 
                   \VAR{X} ) )\) ensures that \(\VAR{X}\) can reference only the bindings
  provided by \(\VAR{\rho}\).</p>
\[\begin{align*}
  \KEY{Rule} \quad
    &amp; \RULE{
      \FUNREF{environment} (  \FUNHYP{../../../Values/Composite}{Maps}{map-override}
                      (  \VAR{\rho}\SUB{1}, 
                             \VAR{\rho}\SUB{0} ) ) \vdash \VAR{X} \TRANS 
        \VAR{X}'
      }{
      \FUNREF{environment} (  \VAR{\rho}\SUB{0} ) \vdash \FUNREF{scope}
                    (  \VAR{\rho}\SUB{1} : \FUNREF{environments}, 
                           \VAR{X} ) \TRANS 
        \FUNREF{scope}
          (  \VAR{\rho}\SUB{1}, 
                 \VAR{X}' )
      }
\\
  \KEY{Rule} \quad
    &amp; \FUNREF{scope}
        (  \_ : \FUNREF{environments}, 
               \VAR{V} : \VAR{T} ) \leadsto 
        \VAR{V}
\end{align*}\]
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{accumulate}(
                     \_ : (   \TO \FUNREF{environments} )\STAR) 
    :  \TO \FUNREF{environments} 
\end{align*}\]
<p>\(\FUNREF{accumulate}
    (  \VAR{D}\SUB{1}, 
           \VAR{D}\SUB{2} )\) executes \(\VAR{D}\SUB{1}\) with the current bindings, to compute an
  environment \(\VAR{\rho}\SUB{1}\) representing some local bindings. It then executes \(\VAR{D}\SUB{2}\) to
  compute an environment \(\VAR{\rho}\SUB{2}\) representing further local bindings, with the
  current bindings extended by \(\VAR{\rho}\SUB{1}\), which may shadow or hide previous
  current bindings. The result is \(\VAR{\rho}\SUB{1}\) extended by \(\VAR{\rho}\SUB{2}\), which may shadow
  or hide the bindings of \(\VAR{\rho}\SUB{1}\).</p>
<p>\(\FUNREF{accumulate}
    (  \_, 
           \_ )\) is associative, with \(\FUNHYP{../../../Values/Composite}{Maps}{map}
    (   \  )\) as unit, and extends to any
  number of arguments.</p>
\[\begin{align*}
  \KEY{Rule} \quad
    &amp; \RULE{
       \VAR{D}\SUB{1} \TRANS 
        \VAR{D}\SUB{1}'
      }{
       \FUNREF{accumulate}
                    (  \VAR{D}\SUB{1}, 
                           \VAR{D}\SUB{2} ) \TRANS 
        \FUNREF{accumulate}
          (  \VAR{D}\SUB{1}', 
                 \VAR{D}\SUB{2} )
      }
\\
  \KEY{Rule} \quad
    &amp; \FUNREF{accumulate}
        (  \VAR{\rho}\SUB{1} : \FUNREF{environments}, 
               \VAR{D}\SUB{2} ) \leadsto 
        \FUNREF{scope}
          (  \VAR{\rho}\SUB{1}, 
                 \FUNHYP{../../../Values/Composite}{Maps}{map-override}
                  (  \VAR{D}\SUB{2}, 
                         \VAR{\rho}\SUB{1} ) )
\\
  \KEY{Rule} \quad
    &amp; \FUNREF{accumulate}
        (   \  ) \leadsto 
        \FUNHYP{../../../Values/Composite}{Maps}{map}
          (   \  )
\\
  \KEY{Rule} \quad
    &amp; \FUNREF{accumulate}
        (  \VAR{D}\SUB{1} ) \leadsto 
        \VAR{D}\SUB{1}
\\
  \KEY{Rule} \quad
    &amp; \FUNREF{accumulate}
        (  \VAR{D}\SUB{1}, 
               \VAR{D}\SUB{2}, 
               \VAR{D}\PLUS ) \leadsto 
        \FUNREF{accumulate}
          (  \VAR{D}\SUB{1}, 
                 \FUNREF{accumulate}
                  (  \VAR{D}\SUB{2}, 
                         \VAR{D}\PLUS ) )
\end{align*}\]
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{collateral}(
                     \VAR{\rho}\STAR : \FUNREF{environments}\STAR) 
    :  \TO \FUNREF{environments} \\&amp;\quad
    \leadsto \FUNHYP{../../Abnormal}{Failing}{checked} \ 
               \FUNHYP{../../../Values/Composite}{Maps}{map-unite}
                 (  \VAR{\rho}\STAR )
\end{align*}\]
<p>\(\FUNREF{collateral}
    (  \VAR{D}\SUB{1}, 
           \cdots )\) pre-evaluates its arguments with the current bindings,
  and unites the resulting maps, which fails if the domains are not pairwise
  disjoint.</p>
<p>\(\FUNREF{collateral}
    (  \VAR{D}\SUB{1}, 
           \VAR{D}\SUB{2} )\) is associative and commutative with \(\FUNHYP{../../../Values/Composite}{Maps}{map}
    (   \  )\) as unit, 
  and extends to any number of arguments.</p>
      <h4 id="recurse">
          <a href="#recurse" class="anchor-heading" aria-labelledby="recurse"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recurse
      </h4>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{bind-recursively}(
                     \VAR{I} : \FUNREF{identifiers}, \VAR{E} :  \TO \FUNHYP{../../../Values}{Value-Types}{values}) 
    :  \TO \FUNREF{environments} \\&amp;\quad
    \leadsto \FUNREF{recursive}
               (  \{  \VAR{I} \}, 
                      \FUNREF{bind-value}
                       (  \VAR{I}, 
                              \VAR{E} ) )
\end{align*}\]
<p>\(\FUNREF{bind-recursively}
    (  \VAR{I}, 
           \VAR{E} )\) binds \(\VAR{I}\) to a link that refers to the value of \(\VAR{E}\), 
  representing a recursive binding of \(\VAR{I}\) to the value of \(\VAR{E}\).
  Since \(\FUNREF{bound-value}
    (  \VAR{I} )\) follows links, it should not be executed during the
  evaluation of \(\VAR{E}\).</p>
\[\begin{align*}
  \KEY{Funcon} \quad
  &amp; \FUNDEC{recursive}(
                     \VAR{SI} : \FUNHYP{../../../Values/Composite}{Sets}{sets}
                               (  \FUNREF{identifiers} ), \VAR{D} :  \TO \FUNREF{environments}) 
    :  \TO \FUNREF{environments} \\&amp;\quad
    \leadsto \FUNREF{re-close}
               (  \FUNREF{bind-to-forward-links}
                       (  \VAR{SI} ), 
                      \VAR{D} )
\end{align*}\]
<p>\(\FUNREF{recursive}
    (  \VAR{SI}, 
           \VAR{D} )\) executes \(\VAR{D}\) with potential recursion on the bindings of 
  the identifiers in the set \(\VAR{SI}\) (which need not be the same as the set of
  identifiers bound by \(\VAR{D}\)).</p>
\[\begin{align*}
  \KEY{Auxiliary Funcon} \quad
  &amp; \FUNDEC{re-close}(
                     \VAR{M} : \FUNHYP{../../../Values/Composite}{Maps}{maps}
                               (  \FUNREF{identifiers}, 
                                      \FUNHYP{../.}{Linking}{links} ), \VAR{D} :  \TO \FUNREF{environments}) 
    :  \TO \FUNREF{environments} \\&amp;\quad
    \leadsto \FUNREF{accumulate}
               (  \FUNREF{scope}
                       (  \VAR{M}, 
                              \VAR{D} ), 
                      \FUNHYP{../.}{Flowing}{sequential}
                       (  \FUNREF{set-forward-links}
                               (  \VAR{M} ), 
                              \FUNHYP{../../../Values/Composite}{Maps}{map}
                               (   \  ) ) )
\end{align*}\]
<p>\(\FUNREF{re-close}
    (  \VAR{M}, 
           \VAR{D} )\) first executes \(\VAR{D}\) in the scope \(\VAR{M}\), which maps identifiers
  to freshly allocated links. This computes an environment \(\VAR{\rho}\) where the bound
  values may contain links, or implicit references to links in abstraction
  values. It then sets the link for each identifier in the domain of \(\VAR{M}\) to
  refer to its bound value in \(\VAR{\rho}\), and returns \(\VAR{\rho}\) as the result.</p>
\[\begin{align*}
  \KEY{Auxiliary Funcon} \quad
  &amp; \FUNDEC{bind-to-forward-links}(
                     \VAR{SI} : \FUNHYP{../../../Values/Composite}{Sets}{sets}
                               (  \FUNREF{identifiers} )) 
    :  \TO \FUNHYP{../../../Values/Composite}{Maps}{maps}
                     (  \FUNREF{identifiers}, 
                            \FUNHYP{../.}{Linking}{links} ) \\&amp;\quad
    \leadsto \FUNHYP{../../../Values/Composite}{Maps}{map-unite}
               ( \\&amp;\quad\quad\quad\quad \FUNHYP{../.}{Giving}{interleave-map}
                       ( \\&amp;\quad\quad\quad\quad\quad \FUNREF{bind-value}
                               (  \FUNHYP{../.}{Giving}{given}, 
                                      \FUNHYP{../.}{Linking}{fresh-link}
                                       (  \FUNHYP{../../../Values}{Value-Types}{values} ) ), \\&amp;\quad\quad\quad\quad\quad
                              \FUNHYP{../../../Values/Composite}{Sets}{set-elements}
                               (  \VAR{SI} ) ) )
\end{align*}\]
<p>\(\FUNREF{bind-to-forward-links}
    (  \VAR{SI} )\) binds each identifier in the set \(\VAR{SI}\) to a
  freshly allocated link.</p>
\[\begin{align*}
  \KEY{Auxiliary Funcon} \quad
  &amp; \FUNDEC{set-forward-links}(
                     \VAR{M} : \FUNHYP{../../../Values/Composite}{Maps}{maps}
                               (  \FUNREF{identifiers}, 
                                      \FUNHYP{../.}{Linking}{links} )) 
    :  \TO \FUNHYP{../../../Values/Primitive}{Null}{null-type} \\&amp;\quad
    \leadsto \FUNHYP{../.}{Flowing}{effect}
               ( \\&amp;\quad\quad\quad\quad \FUNHYP{../.}{Giving}{interleave-map}
                       ( \\&amp;\quad\quad\quad\quad\quad \FUNHYP{../.}{Linking}{set-link}
                               (  \FUNHYP{../../../Values/Composite}{Maps}{map-lookup}
                                       (  \VAR{M}, 
                                              \FUNHYP{../.}{Giving}{given} ), 
                                      \FUNREF{bound-value}
                                       (  \FUNHYP{../.}{Giving}{given} ) ), \\&amp;\quad\quad\quad\quad\quad
                              \FUNHYP{../../../Values/Composite}{Sets}{set-elements}
                               (  \FUNHYP{../../../Values/Composite}{Maps}{map-domain}
                                       (  \VAR{M} ) ) ) )
\end{align*}\]
<p>For each identifier \(\VAR{I}\) in the domain of \(\VAR{M}\), \(\FUNREF{set-forward-links}
    (  \VAR{M} )\) sets the 
  link to which \(\VAR{I}\) is mapped by \(\VAR{M}\) to the current bound value of \(\VAR{I}\).</p>
<p><!--  --></p>
          <hr>
      </div>
    </div>
      <div class="search-overlay"></div>
  </div>
  <script type="text/javascript" src="/cbs-latex/assets/js/toggle_mode.js"></script>
</body>
</html>
